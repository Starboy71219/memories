{"ast":null,"code":"import React from'react';import{Card,CardActions,CardContent,CardMedia,Button,Typography,ButtonBase}from'@material-ui/core/';import ThumbUpAltIcon from'@material-ui/icons/ThumbUpAlt';import DeleteIcon from'@material-ui/icons/Delete';import MoreHorizIcon from'@material-ui/icons/MoreHoriz';import ThumbUpAltOutlined from'@material-ui/icons/ThumbUpAltOutlined';// import InfoIcon from '@material-ui/icons/Info';\nimport{useDispatch}from'react-redux';import moment from'moment';import{useHistory}from'react-router-dom';import{likePost,deletePost}from'../../../actions/posts';import useStyles from'./styles';var Post=function Post(_ref){var _user$result3,_user$result4,_user$result5,_user$result6;var post=_ref.post,setCurrentId=_ref.setCurrentId;var dispatch=useDispatch();var classes=useStyles();var user=JSON.parse(localStorage.getItem('profile'));var history=useHistory();var Likes=function Likes(){var _post$likes;if((post===null||post===void 0?void 0:(_post$likes=post.likes)===null||_post$likes===void 0?void 0:_post$likes.length)>0){return post.likes.find(function(like){var _user$result,_user$result2;return like===((user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.googleId)||(user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2._id));})?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ThumbUpAltIcon,{fontSize:\"small\"}),\"\\xA0\",post.likes.length>2?\"You and \".concat(post.likes.length-1,\" others\"):\"\".concat(post.likes.length,\" like\").concat(post.likes.length>1?'s':'')):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ThumbUpAltOutlined,{fontSize:\"small\"}),\"\\xA0\",post.likes.length,\" \",post.likes.length===1?'Like':'Likes');}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ThumbUpAltOutlined,{fontSize:\"small\"}),\"\\xA0Like\");};var openPost=function openPost(e){// dispatch(getPost(post._id, history));\nhistory.push(\"/posts/\".concat(post._id));};return/*#__PURE__*/React.createElement(Card,{className:classes.card,raised:true,elevation:6},/*#__PURE__*/React.createElement(ButtonBase,{component:\"span\",name:\"test\",className:classes.cardAction,onClick:openPost},/*#__PURE__*/React.createElement(CardMedia,{className:classes.media,image:post.selectedFile||'https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png',title:post.title}),/*#__PURE__*/React.createElement(\"div\",{className:classes.overlay},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\"},post.name),/*#__PURE__*/React.createElement(Typography,{variant:\"body2\"},moment(post.createdAt).fromNow())),((user===null||user===void 0?void 0:(_user$result3=user.result)===null||_user$result3===void 0?void 0:_user$result3.googleId)===(post===null||post===void 0?void 0:post.creator)||(user===null||user===void 0?void 0:(_user$result4=user.result)===null||_user$result4===void 0?void 0:_user$result4._id)===(post===null||post===void 0?void 0:post.creator))&&/*#__PURE__*/React.createElement(\"div\",{className:classes.overlay2,name:\"edit\"},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(e){e.stopPropagation();setCurrentId(post._id);},style:{color:'white'},size:\"small\"},/*#__PURE__*/React.createElement(MoreHorizIcon,{fontSize:\"default\"}))),/*#__PURE__*/React.createElement(\"div\",{className:classes.details},/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",color:\"textSecondary\",component:\"h2\"},post.tags.map(function(tag){return\"#\".concat(tag,\" \");}))),/*#__PURE__*/React.createElement(Typography,{className:classes.title,gutterBottom:true,variant:\"h5\",component:\"h2\"},post.title),/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",color:\"textSecondary\",component:\"p\"},post.message.split(' ').splice(0,20).join(' '),\"...\"))),/*#__PURE__*/React.createElement(CardActions,{className:classes.cardActions},/*#__PURE__*/React.createElement(Button,{size:\"small\",color:\"primary\",disabled:!(user===null||user===void 0?void 0:user.result),onClick:function onClick(){return dispatch(likePost(post._id));}},/*#__PURE__*/React.createElement(Likes,null)),((user===null||user===void 0?void 0:(_user$result5=user.result)===null||_user$result5===void 0?void 0:_user$result5.googleId)===(post===null||post===void 0?void 0:post.creator)||(user===null||user===void 0?void 0:(_user$result6=user.result)===null||_user$result6===void 0?void 0:_user$result6._id)===(post===null||post===void 0?void 0:post.creator))&&/*#__PURE__*/React.createElement(Button,{size:\"small\",color:\"secondary\",onClick:function onClick(){return dispatch(deletePost(post._id));}},/*#__PURE__*/React.createElement(DeleteIcon,{fontSize:\"small\"}),\" \\xA0 Delete\")));};export default Post;","map":{"version":3,"names":["React","Card","CardActions","CardContent","CardMedia","Button","Typography","ButtonBase","ThumbUpAltIcon","DeleteIcon","MoreHorizIcon","ThumbUpAltOutlined","useDispatch","moment","useHistory","likePost","deletePost","useStyles","Post","_ref","_user$result3","_user$result4","_user$result5","_user$result6","post","setCurrentId","dispatch","classes","user","JSON","parse","localStorage","getItem","history","Likes","_post$likes","likes","length","find","like","_user$result","_user$result2","result","googleId","_id","createElement","Fragment","fontSize","concat","openPost","e","push","className","card","raised","elevation","component","name","cardAction","onClick","media","image","selectedFile","title","overlay","variant","createdAt","fromNow","creator","overlay2","stopPropagation","style","color","size","details","tags","map","tag","gutterBottom","message","split","splice","join","cardActions","disabled"],"sources":["/Users/riteshkumar/Desktop/proj/client/src/components/Posts/Post/Post.js"],"sourcesContent":["import React from 'react';\nimport { Card, CardActions, CardContent, CardMedia, Button, Typography, ButtonBase } from '@material-ui/core/';\nimport ThumbUpAltIcon from '@material-ui/icons/ThumbUpAlt';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport ThumbUpAltOutlined from '@material-ui/icons/ThumbUpAltOutlined';\n// import InfoIcon from '@material-ui/icons/Info';\nimport { useDispatch } from 'react-redux';\nimport moment from 'moment';\nimport { useHistory } from 'react-router-dom';\n\nimport { likePost, deletePost } from '../../../actions/posts';\nimport useStyles from './styles';\n\nconst Post = ({ post, setCurrentId }) => {\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const user = JSON.parse(localStorage.getItem('profile'));\n  const history = useHistory();\n\n  const Likes = () => {\n    if (post?.likes?.length > 0) {\n      return post.likes.find((like) => like === (user?.result?.googleId || user?.result?._id))\n        ? (\n          <><ThumbUpAltIcon fontSize=\"small\" />&nbsp;{post.likes.length > 2 ? `You and ${post.likes.length - 1} others` : `${post.likes.length} like${post.likes.length > 1 ? 's' : ''}` }</>\n        ) : (\n          <><ThumbUpAltOutlined fontSize=\"small\" />&nbsp;{post.likes.length} {post.likes.length === 1 ? 'Like' : 'Likes'}</>\n        );\n    }\n\n    return <><ThumbUpAltOutlined fontSize=\"small\" />&nbsp;Like</>;\n  };\n\n  const openPost = (e) => {\n    // dispatch(getPost(post._id, history));\n\n    history.push(`/posts/${post._id}`);\n  };\n\n  return (\n    <Card className={classes.card} raised elevation={6}>\n      <ButtonBase\n        component=\"span\"\n        name=\"test\"\n        className={classes.cardAction}\n        onClick={openPost}\n      >\n        <CardMedia className={classes.media} image={post.selectedFile || 'https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png'} title={post.title} />\n        <div className={classes.overlay}>\n          <Typography variant=\"h6\">{post.name}</Typography>\n          <Typography variant=\"body2\">{moment(post.createdAt).fromNow()}</Typography>\n        </div>\n        {(user?.result?.googleId === post?.creator || user?.result?._id === post?.creator) && (\n        <div className={classes.overlay2} name=\"edit\">\n          <Button\n            onClick={(e) => {\n              e.stopPropagation();\n              setCurrentId(post._id);\n            }}\n            style={{ color: 'white' }}\n            size=\"small\"\n          >\n            <MoreHorizIcon fontSize=\"default\" />\n          </Button>\n        </div>\n        )}\n        <div className={classes.details}>\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"h2\">{post.tags.map((tag) => `#${tag} `)}</Typography>\n        </div>\n        <Typography className={classes.title} gutterBottom variant=\"h5\" component=\"h2\">{post.title}</Typography>\n        <CardContent>\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">{post.message.split(' ').splice(0, 20).join(' ')}...</Typography>\n        </CardContent>\n      </ButtonBase>\n      <CardActions className={classes.cardActions}>\n        <Button size=\"small\" color=\"primary\" disabled={!user?.result} onClick={() => dispatch(likePost(post._id))}>\n          <Likes />\n        </Button>\n        {(user?.result?.googleId === post?.creator || user?.result?._id === post?.creator) && (\n          <Button size=\"small\" color=\"secondary\" onClick={() => dispatch(deletePost(post._id))}>\n            <DeleteIcon fontSize=\"small\" /> &nbsp; Delete\n          </Button>\n        )}\n      </CardActions>\n    </Card>\n  );\n};\n\nexport default Post;"],"mappings":"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"},"metadata":{},"sourceType":"module"}