{"ast":null,"code":"import _slicedToArray from\"/Users/riteshkumar/Desktop/proj/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{AppBar,Typography,Toolbar,Avatar,Button}from'@material-ui/core';import{Link,useHistory,useLocation}from'react-router-dom';import{useDispatch}from'react-redux';import decode from'jwt-decode';import{useCallback}from'react';import memoriesLogo from'../../images/memoriesLogo.png';import memoriesText from'../../images/memoriesText.png';import*as actionType from'../../constants/actionTypes';import useStyles from'./styles';var Navbar=function Navbar(){var _useState=useState(JSON.parse(localStorage.getItem('profile'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var dispatch=useDispatch();var location=useLocation();var history=useHistory();var classes=useStyles();// const logout = () => {\n//   dispatch({ type: actionType.LOGOUT });\n//   history.push('/auth');\n//   setUser(null);\n// };\nvar logout=useCallback(function(){dispatch({type:actionType.LOGOUT});history.push('/auth');setUser(null);},[dispatch,history]);useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())logout();}setUser(JSON.parse(localStorage.getItem('profile')));},[location,logout,user.token]);return/*#__PURE__*/React.createElement(AppBar,{className:classes.appBar,position:\"static\",color:\"inherit\"},/*#__PURE__*/React.createElement(Link,{to:\"/\",className:classes.brandContainer},/*#__PURE__*/React.createElement(\"img\",{component:Link,to:\"/\",src:memoriesText,alt:\"icon\",height:\"45px\"}),/*#__PURE__*/React.createElement(\"img\",{className:classes.image,src:memoriesLogo,alt:\"icon\",height:\"40px\"})),/*#__PURE__*/React.createElement(Toolbar,{className:classes.toolbar},(user===null||user===void 0?void 0:user.result)?/*#__PURE__*/React.createElement(\"div\",{className:classes.profile},/*#__PURE__*/React.createElement(Avatar,{className:classes.purple,alt:user===null||user===void 0?void 0:user.result.name,src:user===null||user===void 0?void 0:user.result.imageUrl},user===null||user===void 0?void 0:user.result.name.charAt(0)),/*#__PURE__*/React.createElement(Typography,{className:classes.userName,variant:\"h6\"},user===null||user===void 0?void 0:user.result.name),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",className:classes.logout,color:\"secondary\",onClick:logout},\"Logout\")):/*#__PURE__*/React.createElement(Button,{component:Link,to:\"/auth\",variant:\"contained\",color:\"primary\"},\"Sign In\")));};export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","AppBar","Typography","Toolbar","Avatar","Button","Link","useHistory","useLocation","useDispatch","decode","useCallback","memoriesLogo","memoriesText","actionType","useStyles","Navbar","_useState","JSON","parse","localStorage","getItem","_useState2","_slicedToArray","user","setUser","dispatch","location","history","classes","logout","type","LOGOUT","push","token","decodedToken","exp","Date","getTime","createElement","className","appBar","position","color","to","brandContainer","component","src","alt","height","image","toolbar","result","profile","purple","name","imageUrl","charAt","userName","variant","onClick"],"sources":["/Users/riteshkumar/Desktop/proj/client/src/components/Navbar/Navbar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { AppBar, Typography, Toolbar, Avatar, Button } from '@material-ui/core';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport decode from 'jwt-decode';\nimport { useCallback } from 'react'\n\n\nimport memoriesLogo from '../../images/memoriesLogo.png';\nimport memoriesText from '../../images/memoriesText.png';\nimport * as actionType from '../../constants/actionTypes';\nimport useStyles from './styles';\n\nconst Navbar = () => {\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const history = useHistory();\n  const classes = useStyles();\n\n  // const logout = () => {\n  //   dispatch({ type: actionType.LOGOUT });\n\n  //   history.push('/auth');\n\n  //   setUser(null);\n  // };\n\n  const logout = useCallback(() => {\n    dispatch({ type: actionType.LOGOUT });\n\n    history.push('/auth');\n\n    setUser(null);\n  }, [dispatch, history])\n\n\n  useEffect(() => {\n    const token = user?.token;\n\n    if (token) {\n      const decodedToken = decode(token);\n\n      if (decodedToken.exp * 1000 < new Date().getTime()) logout();\n    }\n\n    setUser(JSON.parse(localStorage.getItem('profile')));\n  }, [location, logout, user.token]);\n\n  return (\n    <AppBar className={classes.appBar} position=\"static\" color=\"inherit\">\n      <Link to=\"/\" className={classes.brandContainer}>\n        <img component={Link} to=\"/\" src={memoriesText} alt=\"icon\" height=\"45px\" />\n        <img className={classes.image} src={memoriesLogo} alt=\"icon\" height=\"40px\" />\n      </Link>\n      <Toolbar className={classes.toolbar}>\n        {user?.result ? (\n          <div className={classes.profile}>\n            <Avatar className={classes.purple} alt={user?.result.name} src={user?.result.imageUrl}>{user?.result.name.charAt(0)}</Avatar>\n            <Typography className={classes.userName} variant=\"h6\">{user?.result.name}</Typography>\n            <Button variant=\"contained\" className={classes.logout} color=\"secondary\" onClick={logout}>Logout</Button>\n          </div>\n        ) : (\n          <Button component={Link} to=\"/auth\" variant=\"contained\" color=\"primary\">Sign In</Button>\n        )}\n      </Toolbar>\n    </AppBar>\n  );\n};\n\nexport default Navbar;"],"mappings":"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"},"metadata":{},"sourceType":"module"}